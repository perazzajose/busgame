<!doctypehtml><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>√ìmnibus Runner</title><style>*{margin:0;padding:0;box-sizing:border-box}body,html{width:100%;height:100%;margin:0;overflow:hidden}body{touch-action:manipulation;background:linear-gradient(to top,#fff 0,#e6f7ff 20%,#b3e0ff 50%,#4dc3ff 80%,#4dc3ff 90%,#4dc3ff 100%);background-size:100% 350px;background-repeat:no-repeat;background-position:center center;background-color:#000;display:flex;justify-content:center;align-items:center;font-family:Verdana;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}.game-wrapper{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;pointer-events:none}.game{image-rendering:pixelated;transform-origin:center center}.contenedor{width:920px;height:280px;position:relative;overflow:hidden}.dino{width:100px;height:50px;position:absolute;left:42px;bottom:10px;z-index:5}.dino img{width:100%;height:100%;object-fit:contain;image-rendering:pixelated}.suelo{width:100%;height:52px;position:absolute;bottom:0;background-image:url(suelo.png);background-repeat:repeat-x;background-size:auto 100%;background-position:0 bottom;z-index:3;image-rendering:pixelated}.obstaculo{position:absolute;bottom:16px;width:45px;height:45px;background-repeat:no-repeat;background-position:center;background-size:contain;z-index:5}.cactus{background-image:url(cactus1.png)}.cactus2{background-image:url(cactus2.png)}.barrera{background-image:url(barrera.png);width:55px}.auto{background-image:url(auto.png);width:65px}.nube{position:absolute;width:46px;height:14px;background-image:url("nube.png");background-size:contain;background-repeat:no-repeat;z-index:0;pointer-events:none}.bg-tramo{position:absolute;bottom:20px;width:500px;height:160px;background-repeat:no-repeat;background-position:bottom center;background-size:contain;image-rendering:pixelated;pointer-events:none;z-index:1}.score{position:absolute;top:clamp(5px,2vw,15px);right:clamp(10px,3vw,15px);font-size:clamp(20px, 5vw, 30px);font-weight:700;color:#d48871}.game-over{position:absolute;width:100%;top:clamp(80px,30vh,120px);text-align:center;font-size:clamp(24px, 6vw, 30px);font-weight:700;color:#7e928b;display:none;padding:0 20px}#menu-skins{position:fixed;inset:0;background:#3b2f2f;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;color:#fff;pointer-events:auto;padding:20px;overflow-y:auto}#menu-skins h2{font-size:clamp(20px, 5vw, 32px);margin-bottom:20px}.menu-layout{display:flex;flex-direction:column;align-items:center;width:100%;max-width:500px}.skins{display:flex;gap:clamp(10px,3vw,20px);margin-top:15px;flex-wrap:wrap;justify-content:center}.skin-card{width:clamp(120px,22vw,150px);height:auto;aspect-ratio:4/5;background:#eee;border-radius:8px;cursor:pointer;padding:clamp(8px,2vw,10px);text-align:center;color:#333;font-size:clamp(12px, 3vw, 14px);transition:transform .2s,box-shadow .2s}.skin-card:active,.skin-card:hover{transform:scale(1.05);box-shadow:0 4px 8px rgba(0,0,0,.3)}.preview{width:100%;height:60%;margin:auto;background-size:contain;background-repeat:no-repeat;background-position:center;image-rendering:pixelated}#rotate-warning{pointer-events:none}#rotate-warning[style*="display: flex"]{pointer-events:auto}.player-card{background:#eee;padding:clamp(12px,3vw,15px);border-radius:8px;margin-bottom:15px;color:#333;text-align:center;width:100%;max-width:320px}.player-card p{font-size:clamp(14px, 3vw, 16px);margin-bottom:8px}.player-card input{padding:clamp(6px,2vw,8px);width:90%;max-width:240px;margin-top:8px;font-size:clamp(14px, 3vw, 16px);border:1px solid #ccc;border-radius:4px}</style><div id=rotate-warning style="position:fixed;inset:0;background:#000;color:#fff;display:none;justify-content:center;align-items:center;font-size:clamp(18px, 5vw, 24px);z-index:10000;text-align:center;padding:20px">üì± Gir√° el celular<br>para jugar</div><div id=menu-skins><h2>Eleg√≠ tu √≥mnibus</h2><div class=menu-layout><div class=player-card><p>Nombre del jugador</p><input id=playerName placeholder="Tu nombre"></div><div class=skins><div class=skin-card onclick='ElegirSkin("dino.png")'><div class=preview style="background-image:url('dino.png')"></div><p>COT</div><div class=skin-card onclick='ElegirSkin("dino2.png")'><div class=preview style="background-image:url('dino2.png')"></div><p>Cynsa</div><div class=skin-card onclick='ElegirSkin("dino3.png")'><div class=preview style="background-image:url('dino3.png')"></div><p>Rutas del Sol</div></div></div><div id=ranking-menu style="margin-top:clamp(15px,5vw,25px);background:#eee;color:#333;padding:clamp(12px,3vw,15px);border-radius:8px;width:90%;max-width:320px;text-align:center;font-size:clamp(12px, 3vw, 14px)"><b>üèÜ TOP 5</b><div id=ranking-menu-list style="margin-top:10px;font-size:clamp(11px, 2.5vw, 13px)"></div></div></div><div class=game-wrapper><div class=game><div class=contenedor><div class=suelo></div><div class=dino><img src=dino.png></div><div class=score>0</div><div class=game-over>GAME OVER</div><div id=ranking style="position:absolute;top:clamp(100px,30vh,160px);width:100%;text-align:center;color:#fff;font-size:clamp(14px, 3vw, 18px);display:none;padding:0 20px"></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2></script><script>async function CargarRankingMenu(){const e=document.getElementById("ranking-menu-list"),{data:o,error:t}=await supabaseClient.from("scores").select("player_name, score, empresa").order("score",{ascending:!1}).limit(5);!t&&o?(e.innerHTML="",o.forEach(((o,t)=>{e.innerHTML+=`\n          <div style="margin-bottom:6px;">\n            ${t+1}. ${o.player_name} ${o.empresa} ‚Äî <b>${o.score}</b>\n          </div>\n        `}))):e.innerHTML="Error cargando ranking"}let colisionesActivas=!0;const SUPABASE_URL="https://wpejrhaaqbibqwzliffk.supabase.co",SUPABASE_KEY="sb_publishable_vLM9t7ythx-PAvQE70s_fQ_g96Dcsnh",supabaseClient=supabase.createClient(SUPABASE_URL,SUPABASE_KEY);async function GuardarScoreOnline(){const e=document.getElementById("playerName"),o=e&&""!==e.value.trim()?e.value.trim():"Anonimo";try{await supabaseClient.from("scores").insert([{player_name:o,score:score,empresa:empresaSeleccionada}])}catch(e){console.error("Error guardando score",e)}}async function CargarRanking(){const e=document.getElementById("ranking"),{data:o,error:t}=await supabaseClient.from("scores").select("player_name, score").order("score",{ascending:!1}).limit(5);!t&&o&&(e.style.display="block",e.innerHTML="<b>üèÜ TOP 5 Choferes</b><br><br>",o.forEach(((o,t)=>{e.innerHTML+=`${t+1}. ${o.player_name} ‚Äî ${o.score}<br>`})))}document.getElementById("ranking").style.display="none";let currentScale=1;function ScaleGame(){const e=document.querySelector(".game"),o=window.innerWidth/920,t=window.innerHeight/280;currentScale=Math.min(o,t),e.style.transform=`scale(${currentScale})`}window.addEventListener("resize",ScaleGame),ScaleGame();let juegoIniciado=!1,time=new Date,deltaTime=0,sueloY=22,velY=0,impulso=650,gravedad=1800,dinoPosY=sueloY,sueloX=0,velEscenario=1e3/3,score=0,parado=!1,gravedadFlotado=1800,obstaculos=[],tiempoHastaObstaculo=2,nubes=[],tiempoHastaNube=1,fondosTramo=[],eventosTramo=[{score:1,img:"chuy.png",x:0,usado:!1},{score:5,img:"tramo1_b.png",x:0,usado:!1},{score:15,img:"fortaleza.png",x:0,usado:!1},{score:10,img:"coronilla.png",x:0,usado:!1},{score:20,img:"puntadeldiablo.png",x:0,usado:!1},{score:35,img:"tramo2_b.png",x:0,usado:!1},{score:50,img:"tramo4_a.png",x:0,usado:!1},{score:55,img:"tramo5_a.png",x:0,usado:!1},{score:35,img:"tramo6_a.png",x:0,usado:!1},{score:35,img:"tramo7_a.png",x:0,usado:!1},{score:35,img:"tramo8_a.png",x:0,usado:!1},{score:35,img:"tramo9_a.png",x:0,usado:!1}];const contenedor=document.querySelector(".contenedor"),dino=document.querySelector(".dino"),suelo=document.querySelector(".suelo"),textoScore=document.querySelector(".score"),gameOver=document.querySelector(".game-over"),TIPOS_OBSTACULO=[{clase:"cactus",minScore:0},{clase:"cactus2",minScore:0},{clase:"barrera",minScore:20},{clase:"auto",minScore:50}];function ElegirSkin(e){"dino.png"===e&&(empresaSeleccionada="COT"),"dino2.png"===e&&(empresaSeleccionada="CYNSA"),"dino3.png"===e&&(empresaSeleccionada="RUTAS"),dino.querySelector("img").src=e,EsMobile()&&!document.fullscreenElement&&document.documentElement.requestFullscreen().catch((()=>{})),document.querySelector(".game-wrapper").style.pointerEvents="auto",document.getElementById("menu-skins").style.display="none",CargarRankingMenu(),juegoIniciado=!0,parado=!1,score=0,textoScore.textContent=score,obstaculos.forEach((e=>e.remove())),obstaculos=[],fondosTramo.forEach((e=>e.remove())),fondosTramo=[],eventosTramo.forEach((e=>e.usado=!1)),nubes.forEach((e=>e.remove())),nubes=[],dinoPosY=sueloY,velY=0,time=new Date}function Loop(){deltaTime=(new Date-time)/1e3,time=new Date,Update(),requestAnimationFrame(Loop)}function Update(){juegoIniciado&&!parado&&(velY-=gravedad*deltaTime,velEscenario=1e3/3+3*score,MoverDino(),MoverSuelo(),CrearObstaculos(),MoverObstaculos(),CrearNubes(),MoverNubes(),CrearFondosTramo(),MoverFondosTramo(),DetectarColision())}function CheckOrientation(){const e=document.getElementById("rotate-warning");window.innerHeight>window.innerWidth?e.style.display="flex":e.style.display="none"}function EsMobile(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)}Loop(),document.addEventListener("keydown",(e=>{"Space"===e.code&&dinoPosY===sueloY&&(velY=impulso)})),window.addEventListener("resize",CheckOrientation),CheckOrientation();const contenedorJuego=document.querySelector(".contenedor");function MoverDino(){deltaTime<=0||isNaN(deltaTime)||(dinoPosY+=velY*deltaTime,dinoPosY<=sueloY&&(dinoPosY=sueloY,velY=0),isNaN(dinoPosY)&&(dinoPosY=sueloY,velY=0),dino.style.bottom=dinoPosY+"px")}contenedorJuego.addEventListener("touchstart",(e=>{juegoIniciado&&(e.preventDefault(),Saltar())}),{passive:!1});let sueloOffset=0;function MoverSuelo(){sueloOffset-=velEscenario*deltaTime*.7,suelo.style.backgroundPositionX=Math.floor(sueloOffset)+"px"}function CrearNubes(){if(tiempoHastaNube-=deltaTime,tiempoHastaNube>0)return;let e=document.createElement("div");e.className="nube",e.posX=920,e.posY=160+40*Math.random(),e.style.left=e.posX+"px",e.style.bottom=e.posY+"px",contenedor.appendChild(e),nubes.push(e),tiempoHastaNube=2+3*Math.random()}function MoverNubes(){for(let e=nubes.length-1;e>=0;e--){let o=nubes[e];o.posX-=velEscenario*deltaTime*.3,o.style.left=o.posX+"px",o.posX<-100&&(o.remove(),nubes.splice(e,1))}}function CrearFondosTramo(){eventosTramo.forEach((e=>{if(!e.usado&&score>=e.score){let o=document.createElement("div");o.className="bg-tramo",o.style.backgroundImage=`url(${e.img})`,o.posX=920+e.x,o.style.left=o.posX+"px",contenedor.appendChild(o),fondosTramo.push(o),e.usado=!0}}))}function MoverFondosTramo(){for(let e=fondosTramo.length-1;e>=0;e--){let o=fondosTramo[e];o.posX-=velEscenario*deltaTime,o.style.left=o.posX+"px",o.posX<-400&&(o.remove(),fondosTramo.splice(e,0))}}let ultimoObstaculo=null;function CrearObstaculos(){if(tiempoHastaObstaculo-=deltaTime,tiempoHastaObstaculo>0)return;const e=TIPOS_OBSTACULO.filter((e=>score>=e.minScore&&e.clase!==ultimoObstaculo)),o=e[Math.floor(Math.random()*e.length)];ultimoObstaculo=o.clase;let t=document.createElement("div");t.className="obstaculo "+o.clase,t.posX=920,t.style.left=t.posX+"px",contenedor.appendChild(t),obstaculos.push(t);let a=Math.min(score/120,1);tiempoHastaObstaculo=1.8-a+1*Math.random()}const VELOCIDAD_MAX=460;velEscenario=Math.min(333+3*score,460);let dificultad=Math.min(score/120,1);function MoverObstaculos(){for(let e=obstaculos.length-1;e>=0;e--){let o=obstaculos[e];o.posX-=velEscenario*deltaTime,o.style.left=o.posX+"px",o.posX<-100&&(o.remove(),obstaculos.splice(e,1),score++,textoScore.textContent=score)}}tiempoHastaObstaculo=1.8-dificultad+1*Math.random();let empresaSeleccionada="COT";function DetectarColision(){obstaculos.forEach((e=>{IsCollision(dino,e,8,8,8,8)&&GameOver()}))}function IsCollision(e,o,t,a,n,r){const s=e.getBoundingClientRect(),c=o.getBoundingClientRect();return!(s.bottom-n*currentScale<c.top||s.top+t*currentScale>c.bottom||s.right-a*currentScale<c.left||s.left+r*currentScale>c.right)}function GameOver(){parado=!0,gameOver.style.display="block",GuardarScoreOnline()}function Saltar(){void 0!==gravedadFlotado&&dinoPosY===sueloY&&(velY=impulso,gravedad=gravedadFlotado)}CargarRankingMenu()</script>